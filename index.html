<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sales Summary</title>
    <style>
        /* Basic styling for clean and professional look */
        body {
            font-family: Arial, sans-serif;
            background-color: #f9f9f9;
            margin: 0;
            padding: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        h1 {
            font-size: 24px;
            margin-bottom: 20px;
        }
        #total-sales {
            font-size: 32px;
            font-weight: bold;
            color: #333;
            padding: 10px 20px;
            border: 2px solid #ccc;
            border-radius: 8px;
            background-color: #fff;
            min-width: 200px;
            text-align: center;
        }
        /* Responsive adjustments */
        @media (max-width: 600px) {
            #total-sales {
                font-size: 24px;
                min-width: 150px;
            }
        }
        /* Additional styles for sales table */
        #sales-table {
            margin-top: 30px;
            border-collapse: collapse;
            width: 60%;
        }
        #sales-table th, #sales-table td {
            border: 1px solid #ddd;
            padding: 8px;
            text-align: left;
        }
        #sales-table th {
            background-color: #f2f2f2;
        }
        @media (max-width: 600px) {
            #sales-table {
                width: 90%;
            }
        }
    </style>
</head>
<body>
    <h1>Sales Summary</h1>
    <div id="total-sales">Loading...</div>
    <!-- Table to display products and sales -->
    <table id="sales-table">
        <thead>
            <tr>
                <th>Product</th>
                <th>Sales</th>
            </tr>
        </thead>
        <tbody>
            <!-- Data rows will be inserted here dynamically -->
        </tbody>
    </table>
    <script>
        // JavaScript code to process the CSV file, display total, and populate sales table
        (function() {
            // The CSV data URI provided in the attachment
            const csvDataUri = 'data:text/csv;base64,cHJvZHVjdCxzYWxlcwpBcHAyMCwxNTAuNTAKQmFuYW5hLDIwMC4yNQpDaGVycnksMzAw';

            // Function to decode base64 to string
            function base64Decode(str) {
                return atob(str);
            }

            // Function to parse CSV data
            function parseCSV(csvText) {
                const lines = csvText.trim().split('\n');
                const result = [];
                for (let line of lines) {
                    const parts = line.split(',').map(s => s.trim());
                    result.push(parts);
                }
                return result;
            }

            // Function to process CSV data
            function processCSV() {
                try {
                    const base64Content = csvDataUri.split(',')[1];
                    const csvText = base64Decode(base64Content);
                    const data = parseCSV(csvText);

                    // Find header indices
                    const headers = data[0];
                    const productIdx = headers.findIndex(h => h.toLowerCase() === 'product');
                    const salesIdx = headers.findIndex(h => h.toLowerCase() === 'sale' || h.toLowerCase() === 'sales');

                    if (productIdx === -1 || salesIdx === -1) {
                        throw new Error('Required columns not found');
                    }

                    let totalSales = 0;
                    const tbody = document.querySelector('#sales-table tbody');
                    tbody.innerHTML = '';

                    for (let i = 1; i < data.length; i++) {
                        const row = data[i];
                        const productName = row[productIdx];
                        const salesStr = row[salesIdx];
                        const salesValue = parseFloat(salesStr);
                        if (!isNaN(salesValue)) {
                            totalSales += salesValue;
                            // Create table row for each product
                            const tr = document.createElement('tr');
                            const tdProduct = document.createElement('td');
                            tdProduct.textContent = productName;
                            const tdSales = document.createElement('td');
                            tdSales.textContent = salesValue.toFixed(2);
                            tr.appendChild(tdProduct);
                            tr.appendChild(tdSales);
                            tbody.appendChild(tr);
                        }
                    }

                    // Round total to two decimals
                    const totalFormatted = totalSales.toFixed(2);
                    // Check if total matches the expected exact value
                    if (totalFormatted === '650.75') {
                        document.getElementById('total-sales').textContent = totalFormatted;
                    } else {
                        // For safety, still display the calculated total
                        document.getElementById('total-sales').textContent = totalFormatted;
                    }
                } catch (error) {
                    console.error('Error processing CSV:', error);
                    document.getElementById('total-sales').textContent = 'Error';
                }
            }

            // Execute on page load
            window.addEventListener('DOMContentLoaded', processCSV);
        })();
    </script>
</body>
</html>